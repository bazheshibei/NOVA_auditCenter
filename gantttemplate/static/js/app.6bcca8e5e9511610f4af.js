webpackJsonp([1],{1195:function(e,t){},"5Fvo":function(e,t){},Be0z:function(e,t){},EWMY:function(e,t){},HmAm:function(e,t){},K61J:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("7+uW"),i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("keep-alive",[t("router-view")],1)],1)},staticRenderFns:[]};var s=a("VU/8")({name:"App"},i,!1,function(e){a("K61J")},null,null).exports,l=a("/ocq"),o=a("fZjL"),r=a.n(o),c=a("woOf"),d=a.n(c),_=a("Dd8w"),u=a.n(_),p=a("c1iM"),m=a("NYxO"),h={data:function(){return{selectShow:{ywlx:"",pp:"通用",pl:"通用",ssxz:"通用",ddlx:"通用"},selectVal:{ywlx:"",pp:"通用",pl:"通用",ssxz:"通用",ddlx:"通用"},min_lead_time:"",max_lead_time:"",templateName:""}},created:function(){this.$store.dispatch("A_getBusinessType",{that:this})},computed:u()({},Object(m.c)(["ywlx","pp","pl","ssxz","ddlx","templsteindex"]),{plList:function(){var e=this.pl,t=this.selectVal.pp;if("通用"!==t){var a=[];return e.options.forEach(function(e){e.custom_id===t&&a.push(e)}),{label:"品类",index:"pl",options:a}}return{label:"品类",index:"pl",options:[]}}}),methods:{selectChange:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ywlx",a=this[t].options,n="通用",i=0;i<a.length;i++){var s=a[i],l=s.label,o=s.value;if(l===e){n=o;break}}if(this.selectVal[t]=n,"ywlx"===t&&this.$store.dispatch("A_getBusinessTypeData",{type_id:n,that:this}),"ywlx"===t){var r={pp:"",pl:"",ssxz:"",ddlx:""};this.selectShow=d()({},this.selectShow,r),this.selectVal=d()({},this.selectVal,r),this.min_lead_time="",this.max_lead_time=""}else if("pp"===t){var c={pl:"通用",ssxz:"通用",ddlx:"通用"};this.selectShow=d()({},this.selectShow,c),this.selectVal=d()({},this.selectVal,c)}"ywlx"!==t&&this._saveData("select")},input:function(e,t){var a="-"===t[0]?"-":"";""===t||"-"===t||(isNaN(parseInt(t))?this[e]=a?"-1":1:this[e]=a?"-1":parseInt(t)),this._saveData("time")},blur:function(e,t){var a=t.target.value;""!==a&&"0"!==a||("-1"===this.min_lead_time&&"max_lead_time"===e?this[e]="1":this[e]="-1"),this._saveData("time")},_saveData:function(e){if("select"===e){var t=this.selectVal;this.$store.commit("saveData",{name:"selectVal",obj:t})}else if("time"===e){var a=this.min_lead_time,n=this.max_lead_time;this.$store.commit("saveData",{name:"min_lead_time",obj:a}),this.$store.commit("saveData",{name:"max_lead_time",obj:n})}p.a.templateName(this,e),this.$store.commit("saveData",{name:"template_name",obj:this.templateName})},_arrIncludes:function(e,t){for(var a=!1,n=0;n<t.length;n++)t[n]===e&&(a=!0);return a}}},v={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"comBox"},[a("div",{staticClass:"selectBox"},[a("div",{staticClass:"searchName"},[e._v(e._s(e.ywlx.label)+"：")]),e._v(" "),a("el-select",{staticClass:"comSelect",attrs:{filterable:"","collapse-tags":"",placeholder:"请选择",size:"mini"},on:{change:e.selectChange},model:{value:e.selectShow.ywlx,callback:function(t){e.$set(e.selectShow,"ywlx",t)},expression:"selectShow.ywlx"}},e._l(e.ywlx.options,function(e,t){return a("el-option",{key:"options_"+t,staticClass:"comSelectOptions",attrs:{value:e.label}})}))],1),e._v(" "),e._l([e.pp,e.plList,e.ssxz,e.ddlx],function(t,n){return e._arrIncludes(t.index,e.templsteindex)?a("div",{key:"select_"+n,staticClass:"selectBox"},[a("div",{staticClass:"searchName"},[e._v(e._s(t.label)+"：")]),e._v(" "),a("el-select",{staticClass:"comSelect",attrs:{filterable:"","collapse-tags":"",placeholder:"请选择",size:"mini"},on:{change:function(a){e.selectChange(a,t.index)}},model:{value:e.selectShow[t.index],callback:function(a){e.$set(e.selectShow,t.index,a)},expression:"selectShow[item.index]"}},[a("el-option",{staticClass:"comSelectOptions",attrs:{value:"通用"}}),e._v(" "),e._l(t.options,function(e,t){return a("el-option",{key:"options_"+t,staticClass:"comSelectOptions",attrs:{value:e.label}})})],2)],1):e._e()}),e._v(" "),e._arrIncludes("jhzq",e.templsteindex)?a("div",{staticClass:"selectBox"},[a("div",{staticClass:"searchName"},[e._v("交货周期：")]),e._v(" "),a("el-input",{attrs:{size:"mini",placeholder:"最小天数"},on:{input:function(t){e.input("min_lead_time",t)},blur:function(t){e.blur("min_lead_time",t)}},model:{value:e.min_lead_time,callback:function(t){e.min_lead_time=t},expression:"min_lead_time"}}),e._v(" "),a("span",[e._v("  至  ")]),e._v(" "),a("el-input",{attrs:{size:"mini",placeholder:"最大天数"},on:{input:function(t){e.input("max_lead_time",t)},blur:function(t){e.blur("max_lead_time",t)}},model:{value:e.max_lead_time,callback:function(t){e.max_lead_time=t},expression:"max_lead_time"}})],1):e._e(),e._v(" "),a("div",{staticClass:"templateBox"},[a("div",{staticClass:"templateName"},[e._v("模板名称：")]),e._v(" "),a("el-input",{attrs:{size:"mini",placeholder:"请选择业务类型"},on:{change:function(t){e._saveData("")}},model:{value:e.templateName,callback:function(t){e.templateName=t},expression:"templateName"}})],1)],2)},staticRenderFns:[]};var f=a("VU/8")(h,v,!1,function(e){a("EWMY"),a("Vb9x")},"data-v-648d3c90",null).exports,b={data:function(){return{startArr:[{label:"客户下单日期",value:"KHXDRQ"},{label:"款式图下单时间",value:"KSTXDSJ"},{label:"每季度",value:"MJD"},{label:"项目创建日期",value:"XMCJRQ"}],endArr:[{label:"客户交期",value:"KHJQ"},{label:"工厂交期",value:"GCJQ"}],startTime:"",endTime:"",start_reference:"",end_reference:""}},watch:{"$store.state.pageType":function(){if(this.$store.state.pageType){var e=this.$store.state.templateData||{},t=e.start_reference,a=e.end_reference;null!==t&&(this.startTime=t.toUpperCase(),this.start_reference=t.toUpperCase()),null!==a&&(this.endTime=a.toUpperCase(),this.end_reference=a.toUpperCase()),this.add(!1)}}},computed:u()({},Object(m.c)(["nodeList"])),methods:{selectChange:function(e,t){this[e]=t,this.$store.commit("saveData",{name:e,obj:t})},add:function(){var e=this;if(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]){var t=window.location.origin+"/nova/";win({url:t+"pages/nodeinfo/nodeInfolist.jsp?htmlchoice=true",param:{},width:1100,height:550,title:"批量添加节点",onClose:function(){var t=e.nodeList,a=JSON.parse(localStorage.getItem("ganttTemplateChoiceNodeData")),n={};t.forEach(function(e){n[e.node_id]=e});var i=t.length,s=[];a.forEach(function(e){if(!n[e.node_id]){var t={key:i,badge:[],submit_type:"1",sys_clac_formula:"",min_section_value:"",max_section_value:"",verification_remark:""};s.push(d()({},e,t)),i++}}),e.$store.commit("saveData",{name:"addNode",obj:!0}),e.$store.commit("pushData",{name:"nodeList",obj:s})}})}else{var a=e.nodeList,n=e.$store.state.templateData.ganttTemplateDetail||[],i={};a.forEach(function(e){i[e.node_id]=e});var s=a.length,l=[];n.forEach(function(e){if(!i[e.node_id]){var t={key:s,badge:[],submit_type:"1",sys_clac_formula:"",min_section_value:"",max_section_value:"",verification_remark:""};e.submit_type=String(e.submit_type),l.push(d()({},t,e)),s++}}),e.$store.commit("saveData",{name:"addNode",obj:!0}),e.$store.commit("pushData",{name:"nodeList",obj:l})}}}},x={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"comBox"},[a("div",{staticClass:"selectBox"},[a("div",{staticClass:"searchName"},[e._v("设置节点   ")]),e._v(" "),a("div",{staticClass:"searchVal"},[a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:e.add}},[e._v("批量添加节点")])],1)]),e._v(" "),a("div",{staticClass:"selectBox"},[a("div",{staticClass:"searchName"},[e._v("开始值：")]),e._v(" "),a("el-select",{staticClass:"comSelect",attrs:{filterable:"","collapse-tags":"",placeholder:"请选择",size:"mini"},on:{change:function(t){e.selectChange("start_reference",t)}},model:{value:e.startTime,callback:function(t){e.startTime=t},expression:"startTime"}},e._l(e.startArr,function(e,t){return a("el-option",{key:"start_"+t,staticClass:"comSelectOptions",attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("div",{staticClass:"selectBox"},[a("div",{staticClass:"searchName"},[e._v("结束值：")]),e._v(" "),a("el-select",{staticClass:"comSelect",attrs:{filterable:"","collapse-tags":"",placeholder:"请选择",size:"mini"},on:{change:function(t){e.selectChange("end_reference",t)}},model:{value:e.endTime,callback:function(t){e.endTime=t},expression:"endTime"}},e._l(e.endArr,function(e,t){return a("el-option",{key:"end_"+t,staticClass:"comSelectOptions",attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),e._m(0),e._v(" "),e._m(1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"selectBox textBox"},[t("div",{staticClass:"searchName"},[this._v("开始基准值：")]),this._v(" "),t("span",[this._v("KSJZZ")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"selectBox textBox"},[t("div",{staticClass:"searchName"},[this._v("结束基准值：")]),this._v(" "),t("span",[this._v("JSJZZ")])])}]};var g=a("VU/8")(b,x,!1,function(e){a("5Fvo"),a("qxYq")},"data-v-601fc6cb",null).exports,y=a("mvHQ"),w=a.n(y),C=a("d7EF"),j=a.n(C),O=a("bOdI"),S=a.n(O),T={created:function(){this._countHeight()},data:function(){return{tableHeight:0,ierarchyObj:{1:"提报节点",2:"内控节点"},typeObj:{1:"系统计算",2:"用户提报",3:"系统生成"},codeObj:{},inputCode:{},inputStatus:{}}},watch:{"$store.state.isCountTableHeight":function(){var e=this;this.$store.state.isCountTableHeight&&setTimeout(function(){e._countHeight()},1)}},computed:u()({},Object(m.c)(["nodeList","tableObj","tableActive"]),Object(m.b)(["tableData"]),{arrCode:function(){var e={KSJZZ:{},JSJZZ:{}};return this.tableData.forEach(function(t){e[t.node_code]={}}),e},arrCodeUsed:function(){return r()(this.codeObj)}}),methods:{inputChange:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=this.inputStatus,s=!0;if(t)if(p.a.windowOpen(t)){var l=p.a.includes(e,t,this),o="main"!==n||p.a.useSelf(e,t,a,this),r="main"!==n||p.a.eachOther(e,t,a,this),c=p.a.math(e,t,this);s=l&&o&&r&&c}else this.$alert("闲的蛋疼？","滚蛋",{confirmButtonText:"确定",type:"error"});this.inputStatus=d()({},i,S()({},e,s))},deleteClick:function(e){var t=this.nodeList[e];t.is_delete=0,this.$store.commit("spliceData",{name:"nodeList",obj:t,index:e})},clickClose:function(){dg.close()},save:function(){var e=p.a.submit(this),t=j()(e,3),a=t[0],n=t[1],i=t[2];if(a.datalist=w()(i),n.length){console.log("报错");var s=[];n.forEach(function(e){s.push("<p>"+e+"</p>")});var l=s.join("");this.$alert(l,"请完善后再提交",{dangerouslyUseHTMLString:!0})}else{var o=this.$store.state,r=o.node_template_id,c=o.pageType,d=o.templateData.is_copy;c&&("update"===c?(a.node_template_id=r,a.is_copy=d):"addCopy"===c&&(a.copy_node_template_id=r,a.is_copy=1)),this.$store.dispatch("A_addOrUpdatee",{obj:a})}},_countHeight:function(){var e=this,t=0,a=setInterval(function(){if(r()(e.$refs).length){var n=e.$refs,i=n.comTableBox,s=n.bottomBox;i.clientHeight&&s.clientHeight&&(console.log("组件高度 ----- ",i.clientHeight,s.clientHeight),e.tableHeight=i.clientHeight-s.clientHeight,clearInterval(a))}t>100&&clearInterval(a),t++},100)},_arrIncludes:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=!1,n=0;n<t.length;n++)t[n]===e&&(a=!0);return a}}},$={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"comTableBox",staticClass:"comTableBox"},[a("p",{staticStyle:{display:"none"}},[e._v(e._s(e.tableData))]),e._v(" "),e._l(e.tableObj,function(t,n){return n===e.tableActive?a("el-table",{key:"table_"+n,attrs:{data:t,size:"mini",border:"",height:e.tableHeight}},[a("el-table-column",{attrs:{label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._arrIncludes(t.row.node_code,e.arrCodeUsed)?e._e():a("el-tag",{staticClass:"deleteBtn",attrs:{size:"mini",plain:""},on:{click:function(a){e.deleteClick(t.row.index)}}},[e._v("\n          删除\n        ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"节点标识",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox-group",{model:{value:e.tableObj[n][t.row.index].badge,callback:function(a){e.$set(e.tableObj[n][t.row.index],"badge",a)},expression:"tableObj[index][scope.row.index].badge"}},[a("el-checkbox",{staticClass:"comCheckbox",attrs:{label:"is_core_node"}},[e._v("核心节点")]),e._v(" "),a("el-checkbox",{staticClass:"comCheckbox",attrs:{label:"is_audit_follow"}},[e._v("审核关注")])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"节点名称",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{style:2===t.row.node_ierarchy?"color: #C0C4CC;":""},[e._v(e._s(t.row.node_name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"node_code",label:"节点编码",width:"110"}}),e._v(" "),a("el-table-column",{attrs:{label:"节点层级",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:2===t.row.node_ierarchy?"grey":""},[e._v(e._s(e.ierarchyObj[t.row.node_ierarchy]||""))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"提报类型",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[2===t.row.node_ierarchy?a("span",{staticClass:"grey"},[e._v(e._s(e.typeObj[t.row.submit_type]))]):a("el-select",{staticClass:"comSelect",attrs:{size:"mini"},model:{value:e.tableObj[n][t.row.index].submit_type,callback:function(a){e.$set(e.tableObj[n][t.row.index],"submit_type",a)},expression:"tableObj[index][scope.row.index].submit_type"}},[a("el-option",{staticClass:"comSelectOptions",attrs:{label:"系统计算",value:"1"}}),e._v(" "),a("el-option",{staticClass:"comSelectOptions",attrs:{label:"用户提报",value:"2"}}),e._v(" "),a("el-option",{staticClass:"comSelectOptions",attrs:{label:"系统生成",value:"3"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"系统计算公式","min-width":"400"},scopedSlots:e._u([{key:"default",fn:function(t){return["2"!==t.row.submit_type?a("el-input",{attrs:{size:"mini",placeholder:0===t.row.index?"如:Math.min(Math.max(${APPQR},${PPWLDQ})-2,(${KC}-2))":"请输入计算公式"},on:{change:function(a){e.inputChange("第"+(t.row.index+1)+"行_系统计算公式",a,t.row.node_code,"main")}},model:{value:e.tableObj[n][t.row.index].sys_clac_formula,callback:function(a){e.$set(e.tableObj[n][t.row.index],"sys_clac_formula",a)},expression:"tableObj[index][scope.row.index].sys_clac_formula"}}):e._e(),e._v(" "),"用户提报"===e.typeObj[t.row.submit_type]?a("span",[e._v("----")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"节点验证区间最小值",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return["3"!==t.row.submit_type?a("el-input",{attrs:{size:"mini",placeholder:0===t.row.index?"如:${KSJZZ}+3":"请输入计算公式"},on:{change:function(a){e.inputChange("第"+(t.row.index+1)+"行_节点验证区间最小值",a,t.row.node_code)}},model:{value:e.tableObj[n][t.row.index].min_section_value,callback:function(a){e.$set(e.tableObj[n][t.row.index],"min_section_value",a)},expression:"tableObj[index][scope.row.index].min_section_value"}}):e._e(),e._v(" "),"系统生成"===e.typeObj[t.row.submit_type]?a("span",[e._v("----")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"节点验证区间最大值",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return["3"!==t.row.submit_type?a("el-input",{attrs:{size:"mini",placeholder:0===t.row.index?"如:${KSJZZ}+3":"请输入计算公式"},on:{change:function(a){e.inputChange("第"+(t.row.index+1)+"行_节点验证区间最大值",a,t.row.node_code)}},model:{value:e.tableObj[n][t.row.index].max_section_value,callback:function(a){e.$set(e.tableObj[n][t.row.index],"max_section_value",a)},expression:"tableObj[index][scope.row.index].max_section_value"}}):e._e(),e._v(" "),"系统生成"===e.typeObj[t.row.submit_type]?a("span",[e._v("----")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"节点验证说明",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return["系统生成"===e.typeObj[t.row.submit_type]?a("span",[e._v("----")]):a("el-input",{attrs:{size:"mini",placeholder:"请输入验证说明"},model:{value:e.tableObj[n][t.row.index].verification_remark,callback:function(a){e.$set(e.tableObj[n][t.row.index],"verification_remark",a)},expression:"tableObj[index][scope.row.index].verification_remark"}})]}}])})],1):e._e()}),e._v(" "),a("div",{ref:"bottomBox",staticClass:"bottomBox"},[a("el-button",{staticClass:"bottomBtn",attrs:{size:"mini",type:"primary",plain:""},on:{click:e.save}},[e._v("保存")]),e._v(" "),a("el-button",{staticClass:"bottomBtn",attrs:{size:"mini",type:"info",plain:""},on:{click:e.clickClose}},[e._v("关闭")])],1)],2)},staticRenderFns:[]};var k={components:{ComSelect:f,ComSet:g,ComTable:a("VU/8")(T,$,!1,function(e){a("1195"),a("Be0z")},"data-v-60d86843",null).exports},data:function(){return{tableStyle:{},scrollTop:0}},created:function(){this._countHeight(),dg.removeBtn("cancel"),dg.removeBtn("saveAndAdd"),dg.removeBtn("saveAndClose"),dg.removeBtn("saveNoClose")},watch:{"$store.state.isCountTableHeight":function(){this.$store.state.isCountTableHeight&&this._countHeight()}},computed:{},methods:{_countHeight:function(){var e=this,t=0,a=setInterval(function(){if(r()(e.$refs).length){var n=e.$refs,i=n.page,s=n.select,l=n.set;if(i.clientHeight&&s.$el&&s.$el.clientHeight&&l.$el&&l.$el.clientHeight){var o=i.clientHeight-s.$el.clientHeight-l.$el.clientHeight-10;e.tableStyle={height:o+"px"},clearInterval(a)}}t>100&&clearInterval(a),t++},100)},pageScroll:function(e){var t=e.target.scrollTop,a=this.scrollTop;Math.abs(t-a)<300?(this.scrollTop=e.target.scrollTop,this.$refs.page.scrollTop=t):this.$refs.page.scrollTop=a},arrIncludes:function(e,t){for(var a=!1,n=0;n<t.length;n++)t[n]===e&&(a=!0);return a}}},D={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{ref:"page",staticClass:"pageBox",on:{scroll:this.pageScroll}},[t("com-select",{ref:"select"}),this._v(" "),t("com-set",{ref:"set"}),this._v(" "),t("com-table",{style:this.tableStyle})],1)},staticRenderFns:[]};var E=a("VU/8")(k,D,!1,function(e){a("HmAm"),a("pGxJ")},"data-v-0e8619d4",null).exports;n.default.use(l.a);var A=new l.a({routes:[{path:"/center",component:E,name:"信息中心"},{path:"/",component:E,name:""}]}),B=a("mtWM"),z=a.n(B),H=a("mw3O"),N=a.n(H),I=a("zL8q"),L=a.n(I);z.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8",z.a.interceptors.request.use(function(e){return e});var M=function(e){var t=void 0,a=e.path,n=void 0===a?"":a,i=e.path2,s=void 0===i?"":i,l=e.obj,o=void 0===l?{}:l,r=e.suc,c=void 0===r?function(e){}:r,d=e.err,_=void 0===d?function(e){}:d,u=e.method,p=void 0===u?"get":u,m=e.loading,h=void 0===m?"":m,v=o,f=n+s;if("get"===p){var b=[];for(var x in v)b.push(x+"="+v[x]);f+=b.length?f.indexOf("?")>-1?"&"+b.join("&"):"?"+b.join("&"):""}h&&(t=I.Loading.service({text:h})),z()({method:p,url:f,data:N.a.stringify(v)}).then(function(e){c(e.data.data)}).catch(function(e){_(e),h&&t.close()})},U=window.location.origin+"/nova/",R={"模板数据":"ganttTemplateShowAction.ndo?action=getGanttTemplate","业务类型":"nodeBusinessTypeShowAction.ndo?action=getBusinessType","其他下拉选项":"ganttTemplateShowAction.ndo?action=getBusinessTypeData","保存":"ganttTemplateSaveAction.ndo?action=addOrUpdatee"},J=function(e){e.path=U+R[e.name],M(e)},V={options:function(e,t){var a=[];return e.forEach(function(e){if("ywlx"===t){var n=e.type_id,i=e.type_name;a.push({value:n,label:i})}if("pp"===t){var s=e.custom_id,l=e.brand_name;a.push({value:s,label:l})}if("pl"===t){var o=e.dress_type_id,r=e.type_name,c=e.custom_id;a.push({value:o,label:r,custom_id:c})}if("ssxz"===t){var d=e.business_group_id,_=e.group_name;a.push({value:d,label:_})}if("ddlx"===t){var u=e.dcode,p=e.dcvalue;a.push({value:u,label:p})}}),a},tableFirst:function(e){var t=e.nodeList,a=e.tableObj,n=[],i=[];t.forEach(function(e,t){e.index=t,n.push(e),i.push(t)});var s=i.join("_");return a[s]=n,e.tableObj=d()({},a),e.tableActive=s,n},tableSecond:function(e){var t=e.tableActive,a=e.tableObj,n=e.nodeList,i=[],s=[],l={};a[t].forEach(function(e){l[e.node_id]=e});var o=0;n.forEach(function(e){if(l[e.node_id]){var t=l[e.node_id];t.index=o,i.push(t),s.push(t.key),o++}else e.index=o,i.push(e),s.push(e.key),o++});var r=s.join("_");return a[r]=i,e.tableObj=d()({},a),e.tableActive=r,e.addNode=!1,i},tableDelete:function(e){var t=e.tableActive,a=e.tableObj,n=e.nodeList,i=[],s=[],l=0;a[t].forEach(function(e,t){0!==n[e.key].is_delete&&(e.index=l,i.push(e),s.push(e.key),l++)});var o=s.join("_");return a[o]=i,e.tableObj=d()({},a),e.tableActive=o,i},findInArr:function(e){var t=e.text,a=e.name,n=e.returnName,i=e.arr,s={};for(var l in t)for(var o=0;o<i[l].length;o++){var r=i[l][o];if(r[a[l]]===t[l]){s[l]=r[n[l]];break}}return s}},K=V;n.default.use(m.a);var P=new m.a.Store({modules:{},state:{isCountTableHeight:!1,node_template_id:"",pageType:"",templateData:{},isRequestTemplateData:!0,ywlx:{label:"业务类型",index:"ywlx",options:[]},pp:{label:"品牌",index:"pp",options:[]},pl:{label:"品类",index:"pl",options:[]},ssxz:{label:"所属小组",index:"ssxz",options:[]},ddlx:{label:"订单类型",index:"ddlx",options:[]},templsteindex:[],addNode:!1,nodeList:[],tableObj:{asd:[]},tableActive:"asd",selectVal:{},min_lead_time:"",max_lead_time:"",template_name:"",start_reference:"",end_reference:""},getters:{tableData:function(e,t){var a=e.tableObj,n=e.nodeList,i=e.addNode;return n.length?1===r()(a).length?K.tableFirst(e):i?K.tableSecond(e):K.tableDelete(e):[]}},mutations:{saveData:function(e,t){var a=t.name,n=t.obj;e[a]=n},assignData:function(e,t){var a=t.name,n=t.obj,i=e[a]||{};e[a]=d()({},i,n)},spliceData:function(e,t){var a=t.name,n=t.obj,i=t.index;e[a].splice(i,1,n)},pushData:function(e,t){var a=t.name;t.obj.forEach(function(t){e[a].push(t)})}},actions:{A_getBusinessType:function(e,t){var a=e.state,n=e.dispatch,i=t.that;J({name:"业务类型",obj:{},suc:function(e){a.ywlx.options=K.options(e,"ywlx");var t=JSON.parse(localStorage.getItem("ganttTemplateAddOrUpdate"))||{},s=t.node_template_id,l=t.type;l&&(localStorage.removeItem("ganttTemplateAddOrUpdate"),n("A_getGanttTemplate",{that:i,node_template_id:s,type:l}))}})},A_getBusinessTypeData:function(e,t){var a=e.state,n=t.type_id,i=t.that;J({name:"其他下拉选项",obj:{type_id:n},suc:function(e){a.templsteindex=e.templsteindex?e.templsteindex:[];["pp","pl","ssxz","ddlx"].forEach(function(t){e[t]&&e[t].length?a[t].options=K.options(e[t],t):a[t].options=[]}),i._saveData("select");var t=a.pageType,n=a.isRequestTemplateData;if(t&&n){var s=a.templateData,l={pp:s.custom_id,pl:s.dress_type_id,ssxz:s.business_group_id,ddlx:s.order_type},o={pp:a.pp.options,pl:a.pl.options,ssxz:a.ssxz.options,ddlx:a.ddlx.options},r=K.findInArr({text:l,name:{pp:"value",pl:"value",ssxz:"value",ddlx:"value"},returnName:{pp:"label",pl:"label",ssxz:"label",ddlx:"label"},arr:o}),c=r.pp,d=void 0===c?"通用":c,_=r.pl,u=void 0===_?"通用":_,p=r.ssxz,m=void 0===p?"通用":p,h=r.ddlx,v={pp:d,pl:u,ssxz:m,ddlx:void 0===h?"通用":h};for(var f in v)i.selectChange(v[f],f),i.selectShow[f]=v[f];var b=a.templateData,x=b.min_lead_time,g=b.max_lead_time;i.min_lead_time=x,i.max_lead_time=g,a.min_lead_time=x,a.max_lead_time=g,setTimeout(function(){var e=a.templateData.template_name;i.templateName=e,a.template_name=e,a.isCountTableHeight=!0},0),a.isRequestTemplateData=!1}}})},A_addOrUpdatee:function(e,t){e.state;var a=I.Loading.service({}),n=t.obj;J({name:"保存",obj:n,suc:function(e){a.close(),console.log("parent 对象 ----- ",window.parent),dg.close()},method:"post"})},A_getGanttTemplate:function(e,t){var a=e.state,n=t.that,i=t.node_template_id,s=t.type;J({name:"模板数据",obj:{node_template_id:i},suc:function(e){a.node_template_id=i,a.pageType=s,a.templateData=e||{};var t={ywlx:e.node_business_type_id},l={ywlx:a.ywlx.options},o=K.findInArr({text:t,name:{ywlx:"value"},returnName:{ywlx:"label"},arr:l}).ywlx;n.selectChange(o),n.selectShow.ywlx=o;var r=e.start_reference,c=e.end_reference;a.start_reference=r,a.end_reference=c}})}}}),q=(a("tvR6"),a("hKoQ"));a.n(q).a.polyfill(),n.default.use(L.a),new n.default({el:"#app",store:P,router:A,components:{App:s},template:"<App/>"})},Vb9x:function(e,t){},c1iM:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign__=__webpack_require__("woOf"),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign__),obj={templateName:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=e.selectShow,n=e.min_lead_time,i=e.max_lead_time,s=e.pp,l=e.pl,o=e.ssxz,r=e.ddlx,c=["【"+a.ywlx.split("甘特表")[0]+"】"];if(a.ywlx&&t){for(var d in a)"ywlx"!==d&&a[d]&&("pp"===d&&s.options.length&&c.push(a[d]),"pl"===d&&l.options.length&&c.push(a[d]),"ssxz"===d&&o.options.length&&c.push(a[d]),"ddlx"===d&&r.options.length&&c.push(a[d]));""!==n&&""!==i&&("-1"===n?c.push("小于"+i+"天"):"-1"===i?c.push("大于"+n+"天"):c.push(n+"至"+i+"天")),c.push("甘特表模板"),e.templateName=c.join(" ")}},windowOpen:function(e){return-1===e.indexOf("http://")},includes:function(e,t,a){var n={},i=t.match(/\$\{\w+?-?\w+?\}/g)||[];if(i.length){var s=i.map(function(e){var t=e.slice(2,-1);return n[t]=!0,t}),l=a.arrCode,o=[];return s.forEach(function(e){l[e]||o.push(e)}),o.length?(a.$notify.error({title:""+e,message:o.join("、 ")+"是未知编码，请确认后再输入"}),!1):(a.codeObj=__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()({},a.codeObj,n),!0)}return a.$notify.error({title:""+e,message:"无节点编码，请确认后再输入"}),!1},useSelf:function(e,t,a,n){var i=t.match(/\$\{\w+?-?\w+?\}/g)||[],s=n.inputCode,l={},o=!0;return i.forEach(function(e){e.slice(2,-1)===a?o=!1:l[e.slice(2,-1)]=!0}),o?(s[a]=__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()({},{},l),n.inputCode=__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()({},s),!0):(n.$notify.error({title:""+e,message:"引用了自身节点，请重新输入"}),!1)},eachOther:function(e,t,a,n){var i=t.match(/\$\{\w+?-?\w+?\}/g)||[],s=n.inputCode;console.log("inputCode ----- ",s);var l=!0;return i.forEach(function(e){e.slice(2,-1)!==a&&s[e.slice(2,-1)]&&s[e.slice(2,-1)][a]&&(l=!1)}),!!l||(n.$notify.error({title:""+e,message:"有互相引用的节点，请重新输入"}),!1)},math:function(key,str,that){var strReplace=str.replace(/[0-9]+/g,function(e){return 60*parseInt(e)*60*24*1e3}).replace(/\$\{\w+?-?\w+?\}/g,function(e,t){return(new Date).getTime()+60*t*60*24*1e3});try{var result=eval(strReplace);return!0}catch(e){return setTimeout(function(){that.$notify.error({title:""+key,message:"公式有误，请确认后再输入"})},0),!1}},submit:function(e){var t=[],a=e.$store.state,n=a.selectVal,i=a.min_lead_time,s=a.max_lead_time,l=a.template_name,o={node_business_type_id:"",custom_id:"",dress_type_id:"",business_group_id:"",order_type:"",min_lead_time:i,max_lead_time:s,template_name:l};if(l&&n.ywlx){var r={ywlx:"node_business_type_id",pp:"custom_id",pl:"dress_type_id",ssxz:"business_group_id",ddlx:"order_type"};for(var c in n)o[r[c]]="通用"===n[c]?"":n[c]}n.ywlx||t.push("请选择业务类型"),l||t.push("请选择填写模板名称");var d=e.$store.state,_=d.start_reference,u=d.end_reference;_?o.start_reference=_:t.push("请选择开始值"),u?o.end_reference=u:t.push("请选择结束值");var p=e.tableData,m=e.inputStatus,h=e.nodeList,v=[],f=e.codeObj;for(var b in p.forEach(function(e,t){h[e.key]=e}),h.forEach(function(e,a){if(e.sys_clac_formula||0===e.is_delete){e.is_delete=0===e.is_delete?e.is_delete:1,e.is_core_node=0,e.is_audit_follow=0,e.badge.forEach(function(t){e[t]=1}),"2"===e.type&&(e.sys_clac_formula="",m["第"+(a+1)+"行_系统计算公式"]=!0),0===e.is_delete&&(e.sys_clac_formula="",m["第"+(a+1)+"行_系统计算公式"]=!0);var n=e.sys_clac_formula,i=e.is_audit_follow,s=e.is_core_node,l=e.max_section_value,o=e.min_section_value,r=e.node_code,c=e.node_id,d=e.node_ierarchy,_=e.node_name,u=e.verification_remark,p=e.is_delete,h=e.node_template_detail_id,b={sys_clac_formula:n,is_audit_follow:i,is_core_node:s,max_section_value:l,min_section_value:o,node_code:r,node_id:c,node_ierarchy:d,node_name:_,verification_remark:u,submit_type:parseInt(e.submit_type),is_delete:p,node_template_detail_id:h};!0===f[e.node_code]?b.is_quote=1:b.is_quote=0,v.push(b)}else t.push("请填写第"+(a+1)+"行_系统计算公式")}),m)!1===m[b]&&t.push(b+"输入错误");return[o,t,v]}};__webpack_exports__.a=obj},pGxJ:function(e,t){},qxYq:function(e,t){},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.6bcca8e5e9511610f4af.js.map